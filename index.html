<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุดุฑุทุฉ ุฑูุณุจูุช โ ุชุญุฏูุซ ูุฑูุฒ ุงูุนูููุงุช ููุดุฑุทุฉ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./style.css" />
  <!-- ููุชุจุฉ Tesseract (ูุญููุฉ) -->
  <script src="./libs/tesseract.min.js"></script>
</head>
<body>
  <!-- ุงูุชุฑู -->
  <div id="intro-overlay" class="intro-overlay">
    <div class="intro-card">
      <h1>ุดุฑุทุฉ ุฑูุณุจูุช</h1>
      <p>ุชุญุฏูุซ ูุฑูุฒ ุงูุนูููุงุช ููุดุฑุทุฉ</p>
      <small>ุงุถุบุท ูู ุฃู ููุงู ูููุชุงุจุนุฉ</small>
    </div>
  </div>

  <div class="app-container">
    <header class="app-header">
      <h2>ุชุญุฏูุซ ูุฑูุฒ ุงูุนูููุงุช ููุดุฑุทุฉ</h2>
    </header>

    <main class="app-main">
      <!-- ุงููุณู ุงูุฃูุณุฑ: ุงููููุฐุฌ -->
      <section class="form-section">

        <!-- ุจูุงูุงุช ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ -->
        <div class="card">
          <h3>ุจูุงูุงุช ุงูุนูููุงุช</h3>
          <div class="form-grid two-cols">
            <div class="form-group">
              <label>ุงุณู ุงูุนูููุงุช</label>
              <input id="opsName" type="text" placeholder="ูุซุงู: ูุฑูุฒ ุงูุนูููุงุช ุงูุฑุฆูุณู" />
              <input id="opsCode" type="text" placeholder="ููุฏ ุงูุนูููุงุช" />
            </div>
            <div class="form-group">
              <label>ูุงุฆุจ ูุฑูุฒ ุงูุนูููุงุช</label>
              <input id="opsDeputyName" type="text" placeholder="ุงุณู ุงููุงุฆุจ" />
              <input id="opsDeputyCode" type="text" placeholder="ููุฏ ุงููุงุฆุจ" />
            </div>
          </div>
        </div>

        <!-- ููุงุฏุงุช / ุถุจุงุท / ูุณุคูู ูุชุฑุฉ / ุถุจุงุท ุงูุตู -->
        <div class="card">
          <h3>ุงูุทุงูู ุงูุฅุฏุงุฑู</h3>

          <div class="list-block">
            <div class="list-header">
              <span>ุงูููุงุฏุงุช (ุฃููุงุฏ ููุท)</span>
              <button type="button" class="btn btn-sm" id="addLeaderBtn">ุฅุถุงูุฉ ููุงุฏุฉ</button>
            </div>
            <div id="leadersList" class="pill-container"></div>
          </div>

          <div class="list-block">
            <div class="list-header">
              <span>ุงูุถุจุงุท (ุฃููุงุฏ ููุท)</span>
              <button type="button" class="btn btn-sm" id="addOfficerBtn">ุฅุถุงูุฉ ุถุงุจุท</button>
            </div>
            <div id="officersList" class="pill-container"></div>
          </div>

          <div class="list-block">
            <div class="list-header">
              <span>ูุณุคูู ุงููุชุฑุฉ (ุงุณู + ููุฏ)</span>
              <button type="button" class="btn btn-sm" id="setShiftManagerBtn">ุฅุถุงูุฉ / ุชุนุฏูู</button>
            </div>
            <div id="shiftManagerDisplay" class="single-line-display">ูุง ููุฌุฏ</div>
          </div>

          <div class="list-block">
            <div class="list-header">
              <span>ุถุจุงุท ุงูุตู (ุฃููุงุฏ ููุท)</span>
              <button type="button" class="btn btn-sm" id="addNcoBtn">ุฅุถุงูุฉ ุถุงุจุท ุตู</button>
            </div>
            <div id="ncosList" class="pill-container"></div>
          </div>
        </div>

        <!-- ุชูุฒูุน ุงููุญุฏุงุช -->
        <div class="card">
          <div class="card-header-row">
            <h3>ุชูุฒูุน ุงููุญุฏุงุช</h3>
            <button type="button" class="btn btn-sm" id="addUnitRowBtn">ุฅุถุงูุฉ ุณุทุฑ ุฌุฏูุฏ</button>
          </div>
          <div class="units-table-wrapper">
            <table class="units-table">
              <thead>
                <tr>
                  <th>ุงูููุฏ</th>
                  <th>ุงูุญุงูุฉ</th>
                  <th>ุงููููุน</th>
                  <th>ุชูุฒูุน ุงููุญุฏุงุช</th>
                  <th>ููุน ุงููุฑูุจุฉ</th>
                  <th>ุฅุฌุฑุงุกุงุช</th>
                </tr>
              </thead>
              <tbody id="unitsTableBody">
                <!-- ุงูุตููู ุชุชุนุจู ุจุงูู JS -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- OCR -->
        <div class="card">
          <h3>ุงุณุชุฎุฑุงุฌ ุงูุฃููุงุฏ ูู ุตูุฑุฉ (OCR)</h3>

          <div class="ocr-controls">
            <div class="ocr-buttons">
              <input type="file" id="ocrFileInput" accept="image/png,image/jpeg,image/webp" hidden />
              <button type="button" class="btn" id="ocrUploadBtn">ุฑูุน ุตูุฑุฉ ูุงุณุชุฎุฑุงุฌ ุงูุฃููุงุฏ</button>

              <div class="merge-mode">
                <label>
                  <input type="radio" name="mergeMode" value="replace" checked />
                  ุงุณุชุจุฏุงู ุงููุงุฆูุฉ
                </label>
                <label>
                  <input type="radio" name="mergeMode" value="merge" />
                  ุฏูุฌ ูุน ุงููุงุฆูุฉ
                </label>
              </div>
            </div>

            <div class="ocr-dropzone" id="ocrDropzone">
              <p>ููููู ูุตู ุตูุฑุฉ ูุจุงุดุฑุฉ ููุง ุจุงุณุชุฎุฏุงู <strong>Ctrl + V</strong> ุฃู ุณุญุจูุง ุฅูู ูุฐุง ุงููุฑุจุน.</p>
              <p class="hint-text">ููุถู ุฑูุน/ูุตู ุตูุฑุฉ ุนุงููุฉ ุงูุฌูุฏุฉ. ุฃุญูุงููุง ุณุชุญุชุงุฌ ูุชุนุฏูู ุงููุชุงุฆุฌ ูุฏูููุง ูุจู ุงูุฅุฑุณุงู.</p>
            </div>

            <div class="ocr-progress">
              <div class="progress-bar">
                <div id="ocrProgressFill" class="progress-fill"></div>
              </div>
              <span id="ocrProgressText">0%</span>
            </div>

            <div class="ocr-preview" id="ocrPreviewContainer" style="display:none;">
              <h4>ูุนุงููุฉ ุงูุตูุฑุฉ</h4>
              <img id="ocrPreviewImage" alt="ุตูุฑุฉ ูุฑููุนุฉ" />
            </div>
          </div>
        </div>

        <!-- ุฃุฒุฑุงุฑ ุงูููุช -->
        <div class="card">
          <h3>ููุช ุงูุงุณุชูุงู ูุงูุชุณููู</h3>
          <div class="time-controls">
            <button type="button" class="btn" id="setStartTimeBtn">ุชุณุฌูู ููุช ุงูุงุณุชูุงู</button>
            <button type="button" class="btn" id="setEndTimeBtn">ุชุณุฌูู ููุช ุงูุชุณููู</button>
          </div>
        </div>

      </section>

      <!-- ุงููุณู ุงูุฃููู: ุงููุชูุฌุฉ ุงูููุงุฆูุฉ -->
      <section class="result-section">
        <div class="card result-card">
          <div class="card-header-row">
            <h3>ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</h3>
            <button type="button" class="btn btn-sm" id="copyResultBtn">ูุณุฎ ุงููุต</button>
          </div>
          <div id="finalResult" class="result-content" contenteditable="true">
๐ ุงุณุชูุงู ุงูุนูููุงุช
ุงุณู ุงูุนูููุงุช :
ุงููุงุฆุจ ูุฑูุฒ ุงูุนูููุงุช :

ุงูููุงุฏุงุช
-

ุงูุถุจุงุท
-

ูุณุคูู ูุชุฑุฉ
-

ุถุจุงุท ุงูุตู
-

ุชูุฒูุน ุงููุญุฏุงุช
-

ูุญุฏุงุช ุณุจูุฏ ูููุช
-

ูุญุฏุงุช ุฏุจุงุจ
-

ูุญุฏุงุช ุงูููู
-

ููุช ุงูุงุณุชูุงู: โ
ููุช ุงูุชุณููู: โ

ุชู ุงูุชุณููู ุฅูู :
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- ูุงูุฐุฉ ุชุนุฏูู ุงูุตู -->
  <div id="editModal" class="modal-backdrop" style="display:none;">
    <div class="modal">
      <div class="modal-header">
        <h3>ุชุนุฏูู ุจูุงูุงุช ุงููุญุฏุฉ</h3>
        <button type="button" class="modal-close" id="closeEditModalBtn">ร</button>
      </div>
      <div class="modal-body">
        <div class="form-grid">
          <div class="form-group">
            <label>ุงูููุฏ</label>
            <input type="text" id="editCodeInput" />
          </div>
          <div class="form-group">
            <label>ุงูุญุงูุฉ</label>
            <select id="editStatusSelect">
              <option value="ูู ุงูุฎุฏูุฉ">ูู ุงูุฎุฏูุฉ</option>
              <option value="ูุดุบูู">ูุดุบูู</option>
              <option value="ูุดุบูู - ุงุฎุชุจุงุฑ">ูุดุบูู - ุงุฎุชุจุงุฑ</option>
              <option value="ูุดุบูู - ุชุฏุฑูุจ">ูุดุบูู - ุชุฏุฑูุจ</option>
              <option value="ูุดุบูู ุญุงูุฉ ููุฌู 10">ูุดุบูู ุญุงูุฉ ููุฌู 10</option>
            </select>
          </div>
          <div class="form-group">
            <label>ุงููููุน</label>
            <select id="editLocationSelect">
              <option value="ูุง ุดู">ูุง ุดู</option>
              <option value="ุงูุดูุงู">ุงูุดูุงู</option>
              <option value="ุงููุณุท">ุงููุณุท</option>
              <option value="ุงูุดุฑู">ุงูุดุฑู</option>
              <option value="ุงูุฌููุจ">ุงูุฌููุจ</option>
              <option value="ุณุงูุฏู">ุณุงูุฏู</option>
              <option value="ุจูููุชู">ุจูููุชู</option>
            </select>
          </div>
          <div class="form-group">
            <label>ุชูุฒูุน ุงููุญุฏุงุช</label>
            <input type="text" id="editUnitAssignInput" placeholder="ูุซุงู: 145 | ุงูุดูุงู" />
          </div>
          <div class="form-group">
            <label>ููุน ุงููุฑูุจุฉ</label>
            <select id="editVehicleTypeSelect">
              <option value="ูุง ุดู">ูุง ุดู</option>
              <option value="ูุญุฏุฉ ุนุงุฏูุฉ">ูุญุฏุฉ ุนุงุฏูุฉ</option>
              <option value="ุณุจูุฏ ูููุช">ุณุจูุฏ ูููุช</option>
              <option value="ุฏุจุงุจ">ุฏุจุงุจ</option>
              <option value="ุงูููู">ุงูููู</option>
            </select>
          </div>
          <div class="form-group" id="editSpeedUnitOptions" style="display:none;">
            <label>ููุน ุงูุณุจูุฏ</label>
            <select id="editSpeedSubtypeSelect">
              <option value="ูุงูุจูุณ">ูุงูุจูุณ</option>
              <option value="ููุชุฑูุณ">ููุชุฑูุณ</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelEditBtn">ุฅูุบุงุก</button>
        <button type="button" class="btn" id="saveEditBtn">ุญูุธ</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <script src="./script.js"></script>
</body>
</html>
